class ToggleSidebar{name="";evtOpts=!1;addedSidebar=!1;initialized=!1;constructor(e){this.openActionHandler=this.openSidebar.bind(this),this.closeActionHandler=this.closeSidebar.bind(this),this.bodyActionHandler=this.sidebarBodyListener.bind(this),void 0!==e?this.addSidebar(e):this.init()}addSidebar(e){let i="Configuration error when adding a toggle sidebar:",t=[];"object"!=typeof e&&t.push("addSidebar function requires an JS object."),void 0===e.containerNode&&t.push("An sidebar node (container) was not specified."),void 0===e.activationClass&&t.push("An activation CSS class was not specified."),void 0===e.openSidebarNode&&t.push("An opener (activate) node was not specified."),t.length>0&&this.die(i,t),void 0===e.name&&(e.name="ToggleSidebar-"+Date.now(),console.warn('An sidebar name was not specified. "'+e.name+'" will be used instead '));let s=!e.closeSidebarNode||e.autoClose||!1;if("object"!=typeof e.containerNode||null===e.containerNode)t.push("Especified sidebar HTML node container is not valid or not found");else{const i=e.containerNode.dataset;i.sidebarContainer="true",i.sidebar=e.name,i.sidebarActivateClass=e.activationClass,i.sidebarAutoClose=s}if("object"!=typeof e.openSidebarNode||null===e.openSidebarNode)t.push("Especified open sidebar node is not valid or not found");else{const i=e.openSidebarNode.dataset;i.sidebar=e.name,i.sidebarAction="open"}if(void 0!==e.closeSidebarNode)if("object"!=typeof e.closeSidebarNode||null===e.closeSidebarNode)t.push("Especified close sidebar node is not valid or not found");else{const i=e.closeSidebarNode.dataset;i.sidebar=e.name,i.sidebarAction="close"}t.length>0?this.die(i,t):(this.addedSidebar=!0,this.init())}die(e,i){let t=0;throw e="\n"+e+"\n",i.forEach(i=>{t++,e+=t+". "+i+"\n"}),new Error(e)}init(){this.body=document.querySelector("body"),this.sidebars=document.querySelectorAll("[data-sidebar-container]"),this.sidebarsElements=document.querySelectorAll("[data-sidebar-action]"),this.sidebars.length>0&&(this.addedSidebar=!0),this.sidebarsList=[],this.sidebars.forEach(e=>{let i={};i.name=e.dataset.sidebar,i.activationClass=e.dataset.sidebarActivateClass,i.containerNode=e,this.sidebarsElements.forEach(e=>{i.name==e.dataset.sidebar&&("open"==e.dataset.sidebarAction&&(i.openSidebarNode=e),"close"==e.dataset.sidebarAction&&(i.closeSidebarNode=e))});let t="true"==e.dataset.sidebarAutoClose||!1;i.closeSidebarNode||(t=!0),i.autoClose=t,i.openStatus=!1,this.sidebarsList.push(i)}),this.sidebars.length>0&&this.addedSidebar&&(this.execute(),this.initialized=!0)}closeSidebar(e,i){i?(window.removeEventListener("click",this.bodyActionHandler,!1),this.body.classList.remove(e.activationClass),e.openStatus=!1,e.openSidebarNode.addEventListener("click",this.openActionHandler,!1)):window.addEventListener("click",this.bodyActionHandler,!1)}execute(){this.addedSidebar||this.initialized?(window.removeEventListener("click",this.bodyActionHandler,!1),this.sidebarsList.forEach(e=>{e.openSidebarNode.removeEventListener("click",this.openActionHandler,!1),e.openSidebarNode.addEventListener("click",this.openActionHandler,!1)})):console.warn('\nNo sidebar specified with "data-sidebar" attributes in HTML or an JS object.\n')}openSidebar(e){e.stopPropagation();const i=e.target;this.sidebarsList.forEach(e=>{i.dataset.sidebar==e.name?(e.openSidebarNode.removeEventListener("click",this.openActionHandler,!1),this.body.classList.add(e.activationClass),e.openStatus=!0,setTimeout(i=>{i.closeActionHandler(e,!1)},50,this)):1==e.openStatus&&this.closeActionHandler(e,!0)})}sidebarBodyListener(e){e.stopPropagation();const i=e.target;let t;this.sidebarsList.forEach(e=>{e.openStatus&&(t=e)});const s=t.closeSidebarNode,a=t.openSidebarNode,o=i.closest("[data-sidebar="+t.name+"]");(i==a||i==s||t.autoClose&&null===o)&&(window.removeEventListener("click",this.bodyActionHandler,!1),this.closeActionHandler(t,!0))}}