class ToggleSidebar{name="";evtOpts=!1;addedSidebar=!1;initialized=!1;constructor(e){this.openActionHandler=this.openSidebar.bind(this),this.closeActionHandler=this.closeSidebar.bind(this),this.bodyActionHandler=this.sidebarBodyListener.bind(this),void 0!==e?this.addSidebar(e):this.init()}addSidebar(e){const t="Configuration error when adding a toggle sidebar:";let i=[];e instanceof Object||null===e||i.push("addSidebar function requires an JS object"),void 0===e.activationClass&&i.push("An activation CSS class was not specified"),void 0!==e.autoClose&&"boolean"!=typeof e.autoClose&&i.push("'autoClose' parameter is not boolean (true or false without quotes)"),void 0===e.containerNode&&i.push("An sidebar node (container or wrapper) was not specified"),void 0===e.openSidebarNode&&i.push("An opener (activate) node was not specified"),i.length>0&&this.die(t,i),void 0===e.name&&(e.name="ToggleSidebar-"+Date.now(),console.warn('A sidebar name was not specified. "'+e.name+'" will be used instead '));const o=!e.closeSidebarNode||e.autoClose||!1;void 0!==e.closeSidebarNode&&(e.closeSidebarNode=this.getArrayNodes(e.closeSidebarNode,"close sidebar node"),e.closeSidebarNode instanceof Array?e.closeSidebarNode.forEach(t=>{t.forEach(t=>{t.dataset.sidebar=e.name,t.dataset.sidebarAction="close",t.addEventListener("click",(function(e){e.preventDefault()}))})}):i.push("Especified close sidebar node is not valid or not found")),e.containerNode=this.getArrayNodes(e.containerNode,"sidebar container node"),e.containerNode instanceof Array?e.containerNode.forEach(t=>{t.forEach(t=>{t.dataset.sidebarContainer="true",t.dataset.sidebar=e.name,t.dataset.sidebarActivateClass=e.activationClass,t.dataset.sidebarAutoClose=o})}):i.push("The specified sidebar HTML node container is invalid or not found"),void 0!==e.closeSidebarNode&&(e.omitCloseNode=this.getArrayNodes(e.omitCloseNode),e.omitCloseNode instanceof Array?e.omitCloseNode.forEach(t=>{t.forEach(t=>{let i=[];void 0===t.dataset.sidebarOmit?i.push(e.name):(i.push(t.dataset.sidebarOmit.split(",")),i.push(e.name)),t.dataset.sidebarOmit=i,t.dataset.sidebarAction="omit-close",t.addEventListener("click",(function(e){e.preventDefault()}))})}):i.push("'omitCloseNode' attribute can be an array or string but needs to exists in the HTML code")),e.openSidebarNode=this.getArrayNodes(e.openSidebarNode,"open sidebar node"),e.openSidebarNode instanceof Array?e.openSidebarNode.forEach(t=>{t.forEach(t=>{t.dataset.sidebar=e.name,t.dataset.sidebarAction="open",t.addEventListener("click",(function(e){e.preventDefault()}))})}):i.push("Especified open sidebar node is not valid or not found"),i.length>0?this.die(t,i):(this.addedSidebar=!0,this.init())}die(e,t){let i=0;throw e="\n"+e+"\n",t.forEach(t=>{i++,e+=i+". "+t+"\n"}),new Error(e)}init(){this.body=document.querySelector("body"),this.sidebars=document.querySelectorAll("[data-sidebar-container]"),this.sidebarsElements=document.querySelectorAll("[data-sidebar-action]"),this.sidebars.length>0&&(this.addedSidebar=!0),this.sidebarsList=[],this.sidebars.forEach(e=>{let t={};t.name=e.dataset.sidebar,t.activationClass=e.dataset.sidebarActivateClass,t.containerNode=e,t.openSidebarNode=[],t.closeSidebarNode=[],t.omitClose=[],this.sidebarsElements.forEach(e=>{t.name==e.dataset.sidebar&&("open"==e.dataset.sidebarAction&&t.openSidebarNode.push(e),"close"==e.dataset.sidebarAction&&t.closeSidebarNode.push(e),"omit-close"==e.dataset.sidebarAction&&t.omitClose.push(e))});let i="true"==e.dataset.sidebarAutoClose||!1;t.closeSidebarNode||(i=!0),t.autoClose=i,t.openStatus=!1,this.sidebarsList.push(t)}),this.sidebars.length>0&&this.addedSidebar&&(this.execute(),this.initialized=!0)}getArrayNodes(e,t){let i="";const o=[],a=[];if("string"==typeof e){const t=e.charAt(0);"."!==t&&"#"!==t?o.push("String needs to start with dot (.) or hastag(#) to find the node"):a.push(document.querySelectorAll(e))}if(null!==e&&1===e.nodeType){const t="togglesidebarwrapnodelist"+Date.now();e.setAttribute(t,""),a.push(document.querySelectorAll("["+t+"]")),e.removeAttribute(t)}return e instanceof NodeList&&a.push(e),e instanceof Array&&e.forEach(e=>{a.push(this.getArrayNodes(e,t)[0])}),null!==e&&"string"==typeof e&&e instanceof Array||0!=a[0].length||(i="The node is not valid or mistyped","string"!=typeof e&&"number"!=typeof e||(i+=": '"+e+"'"),o.push(i)),o.length>0&&(i="string"==typeof e&&void 0===t?"'"+e+"'":"The node '"+t+"' ",i+=" is not valid or not found:",this.die(i,o)),a}closeSidebar(e,t){t?(window.removeEventListener("mouseup",this.bodyActionHandler,!1),this.body.classList.remove(e.activationClass),e.openStatus=!1,e.openSidebarNode.forEach(e=>{e.addEventListener("mouseup",this.openActionHandler,!1)})):window.addEventListener("mouseup",this.bodyActionHandler,!1)}execute(){this.addedSidebar||this.initialized?(window.removeEventListener("mouseup",this.bodyActionHandler,!1),this.sidebarsList.forEach(e=>{void 0===e.containerNode.dataset.initialized&&(e.openSidebarNode.forEach(e=>{e.removeEventListener("mouseup",this.openActionHandler,!1)}),e.openSidebarNode.forEach(e=>{e.addEventListener("mouseup",this.openActionHandler,!1)}),e.containerNode.dataset.initialized=!0)})):console.warn('\nNo sidebar specified with "data-sidebar" attributes in HTML or an JS object.\n')}openSidebar(e){if(e.stopPropagation(),0==e.button){const t=e.target;this.sidebarsList.forEach(e=>{t.dataset.sidebar==e.name?(e.openSidebarNode.forEach(e=>{e.removeEventListener("mouseup",this.openActionHandler,!1)}),this.body.classList.add(e.activationClass),e.openStatus=!0,setTimeout(t=>{t.closeActionHandler(e,!1)},50,this)):!0===e.openStatus&&this.closeActionHandler(e,!0)})}}sidebarBodyListener(e){if(e.stopPropagation(),0==e.button){const t=e.target;let i;this.sidebarsList.forEach(e=>{e.openStatus&&(i=e)});const o=t.closest("[data-sidebar="+i.name+"]"),a=t.closest("a");let s=!1;null!==t.closest("[data-sidebar-omit*="+i.name+"]")&&(s=!0);let d=!1;i.closeSidebarNode.forEach(e=>{e.dataset.sidebar==t.dataset.sidebar&&e.dataset.sidebarAction==t.dataset.sidebarAction&&(d=!0)});let n=!1;t!=i.openSidebarNode&&!i.openSidebarNode.includes(t)||s||(n=!0),(t==i.openSidebarNode||i.openSidebarNode.includes(t)||d||i.autoClose&&null===o||null!==a)&&!s&&(window.removeEventListener("mouseup",this.bodyActionHandler,!1),this.closeActionHandler(i,!0))}}}